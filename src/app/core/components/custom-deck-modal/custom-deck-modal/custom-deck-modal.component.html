<!--Header-->
<div class="modal-header">
  <h4 class="modal-title" id="myModalLabel">
    {{
      (viewingSummary$ | async) ? "CUSTOM DECK SUMMARY" : "CREATE A CUSTOM DECK"
    }}
  </h4>
  <button
    type="button"
    class="close"
    data-dismiss="modal"
    aria-label="Close"
    (click)="modalRef.hide()"
  >
    <span aria-hidden="true">Ã—</span>
  </button>
</div>
<!--Body-->
<div class="modal-body">
  <!-- ----------------------------------------------------------------------- -->
  <!--                                  FORM                                   -->
  <!-- ----------------------------------------------------------------------- -->
  <div
    [ngClass]="
      (viewingSummary$ | async) === true ? 'hidden' : 'custom-form-ctr'
    "
    class=""
  >
    <form [formGroup]="customDeckForm">
      <div class="lbl">Deck Details</div>
      <!-- Deck Name -->
      <mat-form-field appearance="outline" [style.width.%]="100">
        <mat-label>Name Your Deck</mat-label>
        <input
          [formControl]="deckTitle"
          required
          matInput
          placeholder="Be creative!"
        />
        <mat-error *ngIf="deckTitle.invalid">{{
          getDeckNamErrorMsg()
        }}</mat-error>
      </mat-form-field>

      <!-- Deck Description -->
      <mat-form-field appearance="outline" [style.width.%]="100">
        <mat-label>Deck Appearance Description</mat-label>
        <textarea
          rows="5"
          matInput
          [formControl]="deckDescr"
          placeholder="(Optional) What's your look and feel? For example: straight lines, swirly, like another deck..."
        ></textarea>
      </mat-form-field>

      <!-- Color Selection -->
      <div class="lbl" style="margin-top: -8px">Color Selection</div>
      <div style="font-weight: 100; margin-left: 3px; color: gray">
        Select up to 5 colors (minimum of 2):
      </div>

      <div class="color-container">
        <ng-container *ngFor="let colorRow of colorRows">
          <div style="font-weight: 400; margin-left: 3px; color: gray">
            {{ colorRow.title }}:
          </div>
          <div style="display: flex">
            <color-circle
              *ngFor="let c of colorRow.arr"
              (onChange)="handleChange($event)"
              [colors]="[c]"
            ></color-circle>
          </div>
        </ng-container>
      </div>
    </form>
  </div>

  <!-- ----------------------------------------------------------------------- -->
  <!--                                 SUMMARY                                 -->
  <!-- ----------------------------------------------------------------------- -->
  <div *ngIf="(viewingSummary$ | async) === true">
    <div class="lbl">Deck Name</div>
    <div style="color: grey; margin-bottom: 6px; margin-top: -11px">
      {{ deckTitle.value }}
    </div>
    <div class="lbl">Deck Description</div>
    <div style="color: grey; margin-bottom: 6px; margin-top: -11px">
      {{ deckDescr.value }}
    </div>
    <div class="lbl">Selected Colors</div>
    <div style="background: #f5f5f5; padding: 11px">
      <div
        *ngFor="let color of selectedColors"
        style="width: 100%; height: 25px; margin-bottom: 8px; margin-top: 5px"
        [ngStyle]="{ background: color }"
      ></div>
    </div>
  </div>
</div>
<!--Footer-->
<div class="modal-footer footer-stick">
  <button
    *ngIf="(viewingSummary$ | async) === true"
    type="button"
    mdbBtn
    color="success"
    outline="true"
    class="waves-light"
    mdbWavesEffect
    data-dismiss="modal"
    (click)="onBack()"
  >
    Back
  </button>

  <button
    *ngIf="customDeckItem$ | async as customDeck"
    mdbBtn
    color="success"
    class="waves-light"
    mdbWavesEffect
    (click)="handleActionButton(customDeck)"
    [disabled]="
      customDeckForm.invalid === true ||
      selectedColors.length < 2 ||
      selectedColors.length > 5
    "
  >
    {{ (viewingSummary$ | async) === true ? "Add to Cart" : "Next: Summary" }}
  </button>
</div>
